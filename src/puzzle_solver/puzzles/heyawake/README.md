# Heyawake (Puzzle Type #46)

This is a dedicated solver for Heyawake.

Below are the details of how to utilize the solver. In addition, the solver gives all possible solutions to the input thus it can be utilized to figure out if a single partial input board has multiple possible solutions.

(The solver under the hood mainly utilizes the CP-SAT solver from Google OR-Tools)

* [**Play online**](https://www.puzzle-heyawake.com/)

 You have to color the cells of the grid in black and white according to the rules:
- Regions with a number should contain black cells matching the number.
- 2 black cells cannot be adjacent horizontally or vertically.
- A straight (orthogonal) line of connected white cells cannot span across more than 2 regions.
- All white cells should be connected in a single group.

**Unsolved puzzle**

<img src="https://raw.githubusercontent.com/Ar-Kareem/puzzle_solver/master/images/puzzles/heyawake_unsolved.png" alt="Heyawake unsolved" width="500">

Code to utilize this package and solve the puzzle:

```python
import numpy as np
from puzzle_solver import heyawake_solver as solver
board = np.array([
    ['00', '01', '02', '03', '04', '04', '04', '04', '04', '04', '04', '04', '04', '04', '05', '05', '06', '06', '07', '07'],
    ['00', '08', '02', '03', '09', '09', '10', '10', '10', '11', '11', '12', '12', '12', '05', '05', '06', '06', '07', '07'],
    ['00', '08', '02', '03', '09', '09', '13', '13', '13', '11', '11', '12', '12', '12', '14', '14', '14', '15', '15', '16'],
    ['17', '17', '17', '03', '09', '09', '18', '18', '19', '11', '11', '20', '20', '21', '21', '22', '22', '15', '15', '16'],
    ['17', '17', '17', '23', '23', '23', '23', '23', '19', '11', '11', '24', '24', '21', '21', '25', '25', '25', '25', '26'],
    ['27', '28', '28', '23', '23', '23', '23', '23', '29', '29', '30', '31', '32', '32', '32', '25', '25', '25', '25', '26'],
    ['27', '28', '28', '33', '34', '34', '35', '35', '35', '36', '30', '31', '32', '32', '32', '25', '25', '25', '25', '26'],
    ['27', '28', '28', '33', '34', '34', '35', '35', '35', '37', '37', '31', '32', '32', '32', '25', '25', '25', '25', '38'],
    ['27', '28', '28', '39', '39', '39', '40', '40', '40', '41', '41', '31', '42', '42', '42', '42', '42', '43', '43', '38'],
    ['27', '28', '28', '39', '39', '39', '40', '40', '40', '41', '41', '44', '44', '44', '44', '44', '44', '43', '43', '38'],
    ['27', '45', '45', '39', '39', '39', '46', '46', '47', '41', '41', '44', '44', '44', '44', '44', '44', '48', '48', '48'],
    ['49', '45', '45', '50', '50', '50', '46', '46', '47', '41', '41', '51', '52', '52', '52', '52', '53', '53', '53', '54'],
    ['49', '55', '56', '57', '57', '57', '58', '58', '58', '41', '41', '51', '52', '52', '52', '52', '53', '53', '53', '54'],
    ['49', '55', '59', '57', '57', '57', '58', '58', '58', '60', '60', '61', '61', '62', '62', '63', '63', '63', '63', '54'],
    ['49', '64', '64', '57', '57', '57', '58', '58', '58', '60', '60', '61', '61', '62', '62', '63', '63', '63', '63', '54'],
    ['49', '64', '64', '65', '65', '66', '58', '58', '58', '60', '60', '61', '61', '67', '67', '63', '63', '63', '63', '54'],
    ['49', '64', '64', '65', '65', '66', '58', '58', '58', '60', '60', '61', '61', '67', '67', '68', '68', '69', '70', '54'],
    ['49', '71', '71', '72', '72', '72', '73', '74', '74', '74', '75', '76', '76', '67', '67', '68', '68', '69', '77', '54'],
    ['49', '71', '71', '72', '72', '72', '73', '74', '74', '74', '75', '78', '78', '78', '78', '79', '80', '80', '77', '54'],
    ['81', '81', '81', '81', '81', '81', '81', '82', '82', '82', '75', '83', '83', '83', '83', '79', '80', '80', '77', '54']
])
region_to_clue = {
    '04': 4, '09': 0, '06': 0, '16': 0, '13': 2, '24': 0, '32': 5, '27': 3, '34': 0,
    '39': 3, '37': 0, '41': 3, '38': 2, '43': 0, '44': 4, '54': 3, '53': 2, '70': 1,
    '80': 2, '67': 1, '83': 2, '82': 2, '73': 0, '72': 1, '71': 2, '64': 1, '56': 1,
    '45': 0, '57': 2, '58': 5, '66': 0, '60': 3, '61': 2
}
binst = solver.Board(board=board, region_to_clue=region_to_clue)
solutions = binst.solve_and_print()
```

**Script Output**

```python
Solution found
    0   0   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   1  
    0   1   2   3   4   5   6   7   8   9   0   1   2   3   4   5   6   7   8   9
  ┌───┬───┬───┬───┬───────────────────────────────────────┬───────┬───────┬───────┐
 0│   │   │▒▒▒│   │ 4  ▒▒▒  4  ▒▒▒  4   4  ▒▒▒  4  ▒▒▒  4 │    ▒▒▒│ 0   0 │       │
  │   ├───┤   │   ├───────┬───────────┬───────┬───────────┤       │       │       │
 1│▒▒▒│   │   │▒▒▒│ 0   0 │           │▒▒▒    │           │▒▒▒    │ 0   0 │▒▒▒    │
  │   │   │   │   │       ├───────────┤       │           ├───────┴───┬───┴───┬───┤
 2│   │   │▒▒▒│   │ 0   0 │▒▒▒  2  ▒▒▒│       │    ▒▒▒    │    ▒▒▒    │▒▒▒    │ 0 │
  ├───┴───┴───┤   │       ├───────┬───┤       ├───────┬───┴───┬───────┤       │   │
 3│    ▒▒▒    │▒▒▒│ 0   0 │    ▒▒▒│   │       │▒▒▒    │▒▒▒    │    ▒▒▒│       │ 0 │
  │           ├───┴───────┴───────┤   │       ├───────┤       ├───────┴───────┼───┤
 4│           │    ▒▒▒            │▒▒▒│    ▒▒▒│ 0   0 │       │▒▒▒            │▒▒▒│
  ├───┬───────┤                   ├───┴───┬───┼───┬───┴───────┤               │   │
 5│▒▒▒│       │        ▒▒▒        │    ▒▒▒│   │   │▒▒▒  5  ▒▒▒│            ▒▒▒│   │
  │   │       ├───┬───────┬───────┴───┬───┤   │   │           │               │   │
 6│ 3 │    ▒▒▒│   │ 0   0 │▒▒▒        │   │▒▒▒│   │ 5  ▒▒▒  5 │    ▒▒▒        │   │
  │   │       │   │       │           ├───┴───┤   │           │               ├───┤
 7│▒▒▒│       │▒▒▒│ 0   0 │        ▒▒▒│ 0   0 │   │▒▒▒  5  ▒▒▒│        ▒▒▒    │▒▒▒│
  │   │       ├───┴───────┼───────────┼───────┤   ├───────────┴───────┬───────┤   │
 8│ 3 │    ▒▒▒│ 3  ▒▒▒  3 │    ▒▒▒    │▒▒▒  3 │▒▒▒│                ▒▒▒│ 0   0 │ 2 │
  │   │       │           │           │       ├───┴───────────────────┤       │   │
 9│ 3 │▒▒▒    │ 3   3  ▒▒▒│           │ 3  ▒▒▒│ 4   4  ▒▒▒  4  ▒▒▒  4 │ 0   0 │▒▒▒│
  │   ├───────┤           ├───────┬───┤       │                       ├───────┴───┤
10│▒▒▒│ 0   0 │ 3  ▒▒▒  3 │▒▒▒    │   │▒▒▒  3 │▒▒▒  4   4  ▒▒▒  4   4 │    ▒▒▒    │
  ├───┤       ├───────────┤       │   │       ├───┬───────────────┬───┴───────┬───┤
11│   │ 0   0 │▒▒▒        │       │▒▒▒│ 3   3 │   │▒▒▒         ▒▒▒│ 2  ▒▒▒  2 │ 3 │
  │   ├───┬───┼───────────┼───────┴───┤       │   │               │           │   │
12│   │   │▒▒▒│ 2   2  ▒▒▒│ 5  ▒▒▒  5 │ 3   3 │▒▒▒│               │▒▒▒  2   2 │▒▒▒│
  │   │   ├───┤           │           ├───────┼───┴───┬───────┬───┴───────────┤   │
13│   │▒▒▒│   │ 2   2   2 │▒▒▒  5   5 │▒▒▒  3 │ 2   2 │▒▒▒    │        ▒▒▒    │ 3 │
  │   ├───┴───┤           │           │       │       │       │               │   │
14│   │ 1  ▒▒▒│ 2   2  ▒▒▒│ 5  ▒▒▒  5 │ 3  ▒▒▒│ 2   2 │    ▒▒▒│               │▒▒▒│
  │   │       ├───────┬───┤           │       │       ├───────┤               │   │
15│▒▒▒│ 1   1 │    ▒▒▒│ 0 │ 5   5   5 │▒▒▒  3 │▒▒▒  2 │ 1   1 │▒▒▒            │ 3 │
  │   │       │       │   │           │       │       │       ├───────┬───┬───┤   │
16│   │ 1   1 │▒▒▒    │ 0 │▒▒▒  5  ▒▒▒│ 3   3 │ 2  ▒▒▒│ 1   1 │    ▒▒▒│   │▒▒▒│ 3 │
  │   ├───────┼───────┴───┼───┬───────┴───┬───┼───────┤       │       │   ├───┤   │
17│   │ 2  ▒▒▒│ 1   1   1 │ 0 │▒▒▒        │   │▒▒▒    │▒▒▒  1 │       │▒▒▒│   │ 3 │
  │   │       │           │   │           │   ├───────┴───────┼───┬───┴───┤   │   │
18│   │▒▒▒  2 │ 1   1  ▒▒▒│ 0 │           │▒▒▒│               │   │▒▒▒  2 │   │▒▒▒│
  ├───┴───────┴───────────┴───┼───────────┤   ├───────────────┤   │       │   │   │
19│                ▒▒▒        │▒▒▒  2  ▒▒▒│   │ 2  ▒▒▒  2  ▒▒▒│   │ 2  ▒▒▒│   │ 3 │
  └───────────────────────────┴───────────┴───┴───────────────┴───┴───────┴───┴───┘
Solutions found: 1
status: OPTIMAL
Time taken: 6.72 seconds
```

**Solved puzzle**

<img src="https://raw.githubusercontent.com/Ar-Kareem/puzzle_solver/master/images/puzzles/heyawake_solved.png" alt="Heyawake solved" width="500">
