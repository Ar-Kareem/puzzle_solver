# Star Battle (Puzzle Type #31)

This is a dedicated solver for Star Battle.

Below are the details of how to utilize the solver. In addition, the solver gives all possible solutions to the input thus it can be utilized to figure out if a single partial input board has multiple possible solutions.

(The solver under the hood mainly utilizes the CP-SAT solver from Google OR-Tools)

* [**Play online**](https://www.puzzle-star-battle.com/)

**Rules**

 You have to place stars on the grid according to the rules:
- 2 stars cannot be adjacent horizontally, vertically or diagonally.
- For 1★ puzzles, you have to place 1 star on each row, column and shape.
- For 2★ puzzles, the stars per row, column and shape must be 2 etc.

**Unsolved puzzle**

<img src="https://raw.githubusercontent.com/Ar-Kareem/puzzle_solver/master/images/puzzles/star_battle_unsolved.png" alt="Star Battle unsolved" width="500">

Code to utilize this package and solve the puzzle:

Note that as usual the board is an id of the shape (id is meaningless, just used to identify one shape), and the `star_count` parameter depenends on the puzzle type.

```python
import numpy as np
from puzzle_solver import star_battle_solver as solver
board = np.array([
  ['00', '00', '00', '00', '00', '01', '01', '01', '01', '01', '01', '01', '01', '01', '02', '02', '02', '03', '03', '03', '03', '03', '03', '03', '03'],
  ['00', '01', '00', '01', '01', '01', '01', '01', '01', '01', '04', '04', '01', '02', '02', '02', '02', '05', '05', '05', '05', '05', '05', '03', '03'],
  ['00', '01', '01', '01', '01', '01', '01', '01', '01', '04', '04', '04', '04', '04', '02', '02', '05', '05', '05', '05', '05', '05', '03', '03', '03'],
  ['00', '01', '06', '04', '04', '04', '04', '04', '04', '04', '04', '04', '04', '04', '02', '05', '05', '05', '05', '05', '05', '05', '03', '07', '03'],
  ['00', '01', '06', '06', '06', '06', '06', '06', '06', '04', '04', '04', '04', '02', '02', '02', '02', '02', '05', '05', '05', '05', '05', '07', '03'],
  ['00', '00', '08', '06', '09', '09', '09', '09', '06', '04', '04', '04', '04', '02', '02', '02', '02', '02', '05', '05', '05', '05', '07', '07', '07'],
  ['00', '08', '08', '08', '08', '09', '09', '06', '06', '06', '04', '04', '04', '04', '02', '02', '02', '05', '05', '05', '07', '07', '07', '07', '07'],
  ['00', '00', '08', '08', '08', '09', '09', '09', '09', '06', '10', '10', '10', '10', '02', '02', '02', '05', '11', '11', '11', '11', '07', '07', '07'],
  ['08', '08', '08', '08', '09', '09', '09', '09', '09', '09', '10', '10', '10', '02', '02', '02', '02', '11', '11', '11', '11', '11', '11', '07', '11'],
  ['08', '08', '08', '08', '09', '09', '09', '09', '09', '10', '10', '10', '10', '02', '02', '02', '11', '11', '11', '11', '11', '11', '11', '07', '11'],
  ['08', '08', '08', '09', '09', '09', '09', '09', '10', '10', '10', '10', '10', '12', '12', '12', '12', '11', '11', '11', '11', '11', '11', '11', '11'],
  ['08', '08', '09', '09', '09', '09', '09', '08', '10', '10', '10', '10', '10', '10', '10', '10', '12', '11', '11', '11', '11', '13', '11', '13', '11'],
  ['14', '08', '08', '08', '08', '08', '08', '08', '10', '10', '10', '10', '10', '12', '12', '12', '12', '12', '11', '11', '11', '13', '11', '13', '15'],
  ['14', '14', '14', '14', '16', '08', '16', '16', '17', '10', '10', '10', '10', '10', '10', '10', '10', '12', '13', '13', '13', '13', '13', '13', '15'],
  ['14', '14', '14', '14', '16', '16', '16', '16', '17', '10', '10', '18', '18', '10', '19', '10', '12', '12', '13', '15', '15', '15', '15', '15', '15'],
  ['14', '14', '14', '14', '14', '16', '16', '17', '17', '18', '18', '18', '19', '19', '19', '10', '10', '10', '13', '15', '15', '15', '15', '15', '15'],
  ['14', '14', '14', '16', '16', '16', '16', '17', '18', '18', '20', '20', '19', '21', '19', '19', '19', '19', '13', '15', '15', '15', '15', '15', '15'],
  ['14', '16', '16', '16', '16', '16', '16', '17', '18', '18', '20', '21', '21', '21', '21', '19', '21', '19', '15', '15', '21', '15', '15', '15', '15'],
  ['14', '14', '14', '16', '16', '17', '17', '17', '18', '20', '20', '21', '20', '21', '21', '19', '21', '19', '15', '21', '21', '15', '15', '15', '15'],
  ['14', '14', '14', '16', '16', '16', '17', '17', '18', '18', '20', '20', '20', '20', '21', '21', '21', '21', '21', '21', '15', '15', '22', '22', '15'],
  ['14', '14', '14', '14', '23', '16', '17', '20', '18', '20', '20', '20', '20', '20', '20', '21', '24', '24', '24', '21', '15', '15', '22', '15', '15'],
  ['14', '14', '14', '14', '23', '20', '17', '20', '18', '20', '20', '20', '20', '24', '24', '24', '24', '24', '24', '21', '15', '22', '22', '22', '15'],
  ['14', '23', '23', '14', '23', '20', '20', '20', '18', '20', '20', '20', '20', '24', '24', '24', '24', '24', '24', '24', '24', '24', '24', '22', '15'],
  ['14', '23', '14', '14', '23', '20', '23', '20', '18', '20', '20', '20', '20', '24', '24', '24', '24', '24', '24', '24', '22', '22', '22', '22', '22'],
  ['14', '23', '23', '23', '23', '23', '23', '20', '20', '20', '20', '20', '20', '24', '24', '24', '24', '24', '24', '24', '24', '24', '24', '24', '24']
])
binst = solver.Board(board=board, star_count=6)
solutions = binst.solve_and_print()
```


**Script Output**

```python
Solution found
    0   0   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   1   2   2   2   2   2  
    0   1   2   3   4   5   6   7   8   9   0   1   2   3   4   5   6   7   8   9   0   1   2   3   4
  ┌───────────────────┬───────────────────────────────────┬───────────┬───────────────────────────────┐
 0│ .   .   .   .   X │ .   X   .   X   .   .   .   .   . │ .   .   . │ X   .   X   .   X   .   .   . │
  │   ┌───┐   ┌───────┘                   ┌───────┐   ┌───┘           ├───────────────────────┐       │
 1│ X │ . │ X │ .   .   .   .   .   .   . │ X   . │ X │ .   X   .   . │ .   .   .   .   .   . │ X   . │
  │   │   └───┘                       ┌───┘       └───┴───┐       ┌───┘                   ┌───┘       │
 2│ . │ .   .   .   X   .   X   .   X │ .   .   .   .   . │ .   . │ X   .   X   .   X   . │ .   .   . │
  │   │   ┌───┬───────────────────────┘                   │   ┌───┘                       │   ┌───┐   │
 3│ X │ . │ X │ .   .   .   .   .   .   .   X   .   X   . │ . │ .   .   .   .   .   .   . │ X │ . │ X │
  │   │   │   └───────────────────────┐               ┌───┘   └───────────┐               └───┤   │   │
 4│ . │ . │ .   .   .   X   .   X   . │ .   .   .   . │ .   X   .   X   . │ X   .   X   .   . │ . │ . │
  │   └───┼───┐   ┌───────────────┐   │               │                   │               ┌───┘   └───┤
 5│ .   X │ . │ X │ .   .   .   . │ . │ X   .   X   . │ .   .   .   .   . │ .   .   .   . │ X   .   X │
  │   ┌───┘   └───┴───┐       ┌───┘   └───┐           └───┐           ┌───┘       ┌───────┘           │
 6│ . │ .   .   .   . │ X   . │ X   .   . │ .   .   .   X │ .   X   . │ .   X   . │ X   .   .   .   . │
  │   └───┐           │       └───────┐   ├───────────────┤           │   ┌───────┴───────┐           │
 7│ .   X │ .   X   . │ .   .   .   . │ X │ .   X   .   . │ .   .   . │ . │ .   .   .   . │ X   .   X │
  ├───────┘       ┌───┘               └───┤           ┌───┘           ├───┘               └───┐   ┌───┤
 8│ .   .   .   . │ .   X   .   X   .   . │ .   .   . │ X   .   X   . │ X   .   X   .   .   . │ . │ . │
  │               │                   ┌───┘           │           ┌───┘                       │   │   │
 9│ .   X   .   X │ .   .   .   .   . │ X   .   X   . │ .   .   . │ .   .   .   .   .   X   . │ X │ . │
  │           ┌───┘               ┌───┘               ├───────────┴───┐                       └───┘   │
10│ .   .   . │ .   .   X   .   X │ .   .   .   .   . │ X   .   X   . │ X   .   X   .   .   .   .   . │
  │       ┌───┘               ┌───┤                   └───────────┐   │               ┌───┐   ┌───┐   │
11│ X   . │ X   .   .   .   . │ . │ .   X   .   X   .   .   .   . │ . │ .   .   .   . │ X │ . │ X │ . │
  ├───┐   └───────────────────┘   │                   ┌───────────┘   └───┐           │   │   │   ├───┤
12│ . │ .   .   .   X   .   X   . │ .   .   .   .   . │ X   .   X   .   X │ .   X   . │ . │ . │ . │ . │
  │   └───────────┬───┐   ┌───────┼───┐               └───────────────┐   ├───────────┘   └───┘   │   │
13│ X   .   X   . │ . │ . │ .   . │ X │ .   X   .   .   .   .   .   . │ . │ .   .   .   X   .   X │ . │
  │               │   └───┘       │   │       ┌───────┐   ┌───┐   ┌───┘   │   ┌───────────────────┘   │
14│ .   .   .   . │ X   .   X   . │ . │ .   . │ .   X │ . │ X │ . │ X   . │ X │ .   .   .   .   .   . │
  │               └───┐       ┌───┘   ├───────┘   ┌───┴───┘   │   └───────┤   │                       │
15│ .   X   .   .   . │ .   . │ .   X │ .   X   . │ .   .   . │ .   .   . │ . │ .   X   .   X   .   X │
  │           ┌───────┘       │   ┌───┘   ┌───────┤   ┌───┐   └───────────┤   │                       │
16│ .   .   . │ X   .   X   . │ . │ .   . │ .   . │ X │ . │ X   .   X   . │ X │ .   .   .   .   .   . │
  │   ┌───────┘               │   │       │   ┌───┴───┘   └───┐   ┌───┐   ├───┘   ┌───┐               │
17│ . │ X   .   .   .   .   . │ X │ .   X │ . │ .   .   .   . │ . │ . │ . │ .   . │ X │ .   X   .   X │
  │   └───────┐       ┌───────┘   │   ┌───┘   │   ┌───┐       │   │   │   │   ┌───┘   │               │
18│ .   .   . │ X   . │ X   .   . │ . │ .   . │ X │ . │ X   . │ X │ . │ X │ . │ .   . │ .   .   .   . │
  │           │       └───┐       │   └───┐   └───┘   └───┐   └───┘   └───┴───┘   ┌───┘   ┌───────┐   │
19│ X   .   . │ .   .   . │ .   X │ .   X │ .   .   .   . │ .   .   .   .   .   X │ .   X │ .   X │ . │
  │           └───┬───┐   │   ┌───┤   ┌───┘               └───┐   ┌───────────┐   │       │   ┌───┘   │
20│ .   .   X   . │ X │ . │ . │ . │ . │ .   .   X   .   X   . │ X │ .   X   . │ . │ .   . │ . │ .   . │
  │               │   ├───┤   │   │   │               ┌───────┴───┘           │   │   ┌───┘   └───┐   │
21│ X   .   .   . │ . │ . │ X │ . │ X │ .   .   .   . │ .   .   .   .   .   . │ X │ . │ X   .   X │ . │
  │   ┌───────┐   │   │   └───┘   │   │               │                       └───┴───┴───────┐   │   │
22│ . │ .   X │ . │ X │ .   .   . │ . │ .   X   .   X │ .   X   .   X   .   .   .   .   .   . │ . │ . │
  │   │   ┌───┘   │   │   ┌───┐   │   │               │                           ┌───────────┘   └───┤
23│ . │ . │ .   . │ . │ . │ X │ . │ X │ .   .   .   . │ .   .   .   .   .   X   . │ X   .   X   .   X │
  │   │   └───────┘   └───┘   │   └───┘               │                           └───────────────────┤
24│ . │ X   .   X   .   .   . │ .   .   .   X   .   X │ .   X   .   X   .   .   .   .   .   .   .   . │
  └───┴───────────────────────┴───────────────────────┴───────────────────────────────────────────────┘
Solutions found: 1
status: OPTIMAL
Time taken: 0.39 seconds
```

**Solved puzzle**

<img src="https://raw.githubusercontent.com/Ar-Kareem/puzzle_solver/master/images/puzzles/star_battle_solved.png" alt="Star Battle solved" width="500">


# Star Battle Shapeless (Puzzle Type #32)

This is a dedicated solver for Star Battle Shapeless.

Below are the details of how to utilize the solver. In addition, the solver gives all possible solutions to the input thus it can be utilized to figure out if a single partial input board has multiple possible solutions.

(The solver under the hood mainly utilizes the CP-SAT solver from Google OR-Tools)

* [**Play online**](https://www.puzzle-star-battle.com/?size=14)

**Rules**

 You have to place stars on the grid according to the rules:
- 2 stars cannot be adjacent horizontally, vertically or diagonally.
- For 1★ puzzles, you have to place 1 star on each row and column.
- For 2★ puzzles, the stars per row and column must be 2 etc.
- Some places begin with a black square and cannot have stars placed on them.

**Unsolved puzzle**

<img src="https://raw.githubusercontent.com/Ar-Kareem/puzzle_solver/master/images/puzzles/star_battle_shapeless_unsolved.png" alt="Star Battle Shapeless unsolved" width="500">

Code to utilize this package and solve the puzzle:

The `star_count` parameter depenends on the puzzle type.

```python
import numpy as np
from puzzle_solver import star_battle_shapeless as solver
board = np.array([
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '], 
  ['B', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '], 
  ['B', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 'B', ' '], 
  ['B', 'B', ' ', ' ', 'B', ' ', ' ', ' ', ' ', ' '], 
  ['B', 'B', ' ', ' ', 'B', ' ', ' ', ' ', ' ', ' '], 
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '], 
  [' ', ' ', ' ', ' ', 'B', ' ', ' ', ' ', 'B', ' '], 
  ['B', ' ', ' ', ' ', ' ', ' ', ' ', 'B', 'B', ' '], 
  ['B', 'B', ' ', ' ', ' ', ' ', 'B', 'B', 'B', ' '], 
  ['B', ' ', ' ', ' ', 'B', ' ', ' ', ' ', ' ', ' '], 
])
binst = solver.Board(board=board, star_count=2)
solutions = binst.solve_and_print()
```


**Script Output**

```python
Solution found
    0   0   0   0   0   0   0   0   0   0  
    0   1   2   3   4   5   6   7   8   9
  ┌───────────────────────────────────────┐
 0│ X   .   .   .   X   .   .   .   .   . │
  ├───┐                                   │
 1│   │ .   .   .   .   .   X   .   X   . │
  │   │                           ┌───┐   │
 2│   │ .   X   .   X   .   .   . │   │ . │
  │   └───┐       ┌───┐           └───┘   │
 3│       │ .   . │   │ .   .   X   .   X │
  │       │       │   │                   │
 4│       │ X   . │   │ X   .   .   .   . │
  ├───────┘       └───┘                   │
 5│ X   .   .   .   .   .   .   .   X   . │
  │               ┌───┐           ┌───┐   │
 6│ .   .   .   X │   │ .   X   . │   │ . │
  ├───┐           └───┘       ┌───┘   │   │
 7│   │ X   .   .   .   .   . │       │ X │
  │   └───┐               ┌───┘       │   │
 8│       │ .   X   .   X │           │ . │
  │   ┌───┘       ┌───┐   └───────────┘   │
 9│   │ X   .   . │   │ .   .   X   .   . │
  └───┴───────────┴───┴───────────────────┘
Solutions found: 1
status: OPTIMAL
Time taken: 0.02 seconds
```

**Solved puzzle**

<img src="https://raw.githubusercontent.com/Ar-Kareem/puzzle_solver/master/images/puzzles/star_battle_shapeless_solved.png" alt="Star Battle Shapeless solved" width="500">
