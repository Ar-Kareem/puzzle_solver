# Lits (Puzzle Type #33)

This is a dedicated solver for Lits.

Below are the details of how to utilize the solver. In addition, the solver gives all possible solutions to the input thus it can be utilized to figure out if a single partial input board has multiple possible solutions.

(The solver under the hood mainly utilizes the CP-SAT solver from Google OR-Tools)

* [**Play online**](https://www.puzzle-lits.com/)

 You have to place one tetromino in each region in such a way that:
- 2 tetrominoes of matching types cannot touch each other horizontally or vertically. Rotations and reflections count as matching.
- The shaded cells should form a single connected area.
- 2x2 shaded areas are not allowed.

* Tetromino is a shape made of 4 connected cells. There are 5 types of tetrominoes, which are usually named L, I, T, S and O, based on their shape. The O tetromino is not used in this puzzle because it is a 2x2 shape, which is not allowed. 

Note: The solver is capable of solving variations where the puzzle pieces the made up of more than 4 cells (e.g., pentominoes for 5 with `polyomino_degrees=5`, or hexominoes for 6 with `polyomino_degrees=6`, etc.). By default the degree is set to 4 thus only tetrominoes are used.

**Unsolved puzzle**

<img src="https://raw.githubusercontent.com/Ar-Kareem/puzzle_solver/master/images/puzzles/lits_unsolved.png" alt="Lits unsolved" width="500">

Code to utilize this package and solve the puzzle:

```python
import numpy as np
from puzzle_solver import lits_solver as solver
board = np.array([
  ['00', '00', '00', '01', '01', '02', '02', '02', '03', '03', '03', '04', '04', '05', '06', '07', '07', '08', '08', '09'],
  ['00', '00', '00', '00', '01', '02', '03', '03', '03', '10', '04', '04', '05', '05', '06', '07', '08', '08', '09', '09'],
  ['11', '11', '11', '01', '01', '02', '02', '03', '10', '10', '04', '04', '05', '06', '06', '07', '07', '07', '09', '12'],
  ['11', '13', '13', '13', '01', '02', '03', '03', '03', '10', '04', '04', '06', '06', '06', '07', '12', '09', '09', '12'],
  ['11', '11', '11', '13', '14', '14', '03', '15', '15', '10', '04', '04', '06', '16', '16', '12', '12', '09', '12', '12'],
  ['17', '13', '13', '13', '14', '14', '03', '03', '15', '15', '04', '04', '16', '16', '16', '12', '12', '12', '12', '18'],
  ['17', '13', '19', '13', '20', '14', '03', '03', '15', '04', '04', '16', '16', '21', '21', '22', '23', '23', '23', '18'],
  ['17', '17', '19', '19', '20', '20', '03', '03', '24', '24', '24', '25', '25', '25', '21', '22', '23', '23', '18', '18'],
  ['17', '26', '19', '19', '20', '20', '20', '24', '24', '20', '20', '25', '25', '21', '21', '22', '22', '23', '23', '18'],
  ['26', '26', '26', '19', '19', '20', '20', '20', '20', '20', '25', '25', '21', '21', '21', '21', '21', '23', '27', '18'],
  ['28', '28', '28', '29', '29', '29', '29', '20', '20', '30', '30', '25', '31', '32', '32', '32', '21', '27', '27', '27'],
  ['28', '33', '28', '28', '28', '28', '29', '34', '34', '35', '30', '30', '31', '31', '31', '32', '32', '36', '36', '27'],
  ['28', '33', '33', '28', '28', '29', '29', '34', '34', '35', '35', '30', '31', '31', '31', '32', '36', '36', '27', '27'],
  ['28', '33', '37', '37', '28', '29', '34', '34', '35', '35', '38', '38', '39', '39', '40', '40', '40', '40', '27', '41'],
  ['28', '37', '37', '37', '42', '34', '34', '34', '43', '38', '38', '38', '39', '39', '44', '44', '40', '40', '27', '41'],
  ['37', '37', '42', '42', '42', '34', '34', '43', '43', '43', '38', '39', '39', '39', '44', '44', '27', '27', '27', '41'],
  ['45', '45', '45', '42', '46', '34', '34', '34', '34', '38', '38', '47', '47', '47', '44', '44', '44', '27', '27', '41'],
  ['48', '45', '45', '46', '46', '46', '46', '34', '49', '49', '49', '47', '44', '44', '44', '27', '44', '50', '27', '27'],
  ['48', '48', '45', '46', '46', '51', '46', '52', '52', '49', '49', '53', '44', '53', '44', '27', '50', '50', '50', '27'],
  ['48', '51', '51', '51', '51', '51', '52', '52', '52', '49', '53', '53', '53', '53', '44', '27', '27', '27', '27', '27']
])
binst = solver.Board(board)
solutions = binst.solve_then_constrain()  # solve_then_constrain NOT solve_and_print (to use #1 instead of #2 in https://github.com/google/or-tools/discussions/3347, its faster in this case)
```

**Script Output**

```python
Solution found
    0   0   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   1  
    0   1   2   3   4   5   6   7   8   9   0   1   2   3   4   5   6   7   8   9
  ┌───────────┬───────┬───────────┬───────────┬───────┬───┬───┬───────┬───────┬───┐
 0│▒▒▒ ▒▒▒ ▒▒▒│       │▒▒▒ ▒▒▒ ▒▒▒│           │       │▒▒▒│   │▒▒▒    │▒▒▒ ▒▒▒│   │
  │           └───┐   │   ┌───────┘   ┌───┬───┘   ┌───┘   │   │   ┌───┘   ┌───┘   │
 1│    ▒▒▒        │▒▒▒│▒▒▒│           │▒▒▒│       │▒▒▒ ▒▒▒│   │▒▒▒│▒▒▒ ▒▒▒│       │
  ├───────────┬───┘   │   └───┐   ┌───┘   │       │   ┌───┘   │   └───────┤   ┌───┤
 2│▒▒▒ ▒▒▒ ▒▒▒│▒▒▒ ▒▒▒│       │▒▒▒│▒▒▒ ▒▒▒│       │▒▒▒│       │▒▒▒        │▒▒▒│   │
  │   ┌───────┴───┐   │   ┌───┘   └───┐   │       ├───┘       │   ┌───┬───┘   │   │
 3│▒▒▒│           │▒▒▒│   │▒▒▒ ▒▒▒    │▒▒▒│▒▒▒    │▒▒▒ ▒▒▒ ▒▒▒│▒▒▒│   │▒▒▒ ▒▒▒│   │
  │   └───────┐   ├───┴───┤   ┌───────┤   │       │   ┌───────┼───┘   │   ┌───┘   │
 4│           │▒▒▒│▒▒▒ ▒▒▒│▒▒▒│    ▒▒▒│   │▒▒▒    │▒▒▒│       │       │▒▒▒│       │
  ├───┬───────┘   │       │   └───┐   └───┤       ├───┘       │       └───┘   ┌───┤
 5│▒▒▒│    ▒▒▒ ▒▒▒│    ▒▒▒│       │▒▒▒ ▒▒▒│▒▒▒    │▒▒▒ ▒▒▒    │▒▒▒ ▒▒▒ ▒▒▒ ▒▒▒│   │
  │   │   ┌───┐   ├───┐   │       │   ┌───┘   ┌───┘   ┌───────┼───┬───────────┤   │
 6│▒▒▒│   │   │▒▒▒│   │▒▒▒│       │▒▒▒│    ▒▒▒│▒▒▒ ▒▒▒│       │▒▒▒│           │▒▒▒│
  │   └───┤   └───┤   └───┤       ├───┴───────┼───────┴───┐   │   │       ┌───┘   │
 7│▒▒▒ ▒▒▒│    ▒▒▒│    ▒▒▒│       │▒▒▒ ▒▒▒    │▒▒▒        │   │▒▒▒│    ▒▒▒│    ▒▒▒│
  │   ┌───┤       │       └───┬───┘   ┌───────┤       ┌───┘   │   └───┐   └───┐   │
 8│   │▒▒▒│    ▒▒▒│    ▒▒▒ ▒▒▒│▒▒▒ ▒▒▒│       │▒▒▒    │▒▒▒ ▒▒▒│▒▒▒ ▒▒▒│▒▒▒ ▒▒▒│▒▒▒│
  ├───┘   └───┐   └───┐       └───────┘   ┌───┘   ┌───┘       └───────┤   ┌───┤   │
 9│▒▒▒ ▒▒▒ ▒▒▒│▒▒▒ ▒▒▒│▒▒▒                │▒▒▒ ▒▒▒│▒▒▒ ▒▒▒            │▒▒▒│   │▒▒▒│
  ├───────────┼───────┴───────┐       ┌───┴───┐   ├───┬───────────┐   ├───┘   └───┤
10│           │        ▒▒▒ ▒▒▒│       │    ▒▒▒│   │   │▒▒▒ ▒▒▒ ▒▒▒│   │           │
  │   ┌───┐   └───────────┐   ├───────┼───┐   └───┤   └───────┐   └───┼───────┐   │
11│   │▒▒▒│    ▒▒▒ ▒▒▒    │▒▒▒│       │▒▒▒│▒▒▒ ▒▒▒│    ▒▒▒    │▒▒▒    │▒▒▒ ▒▒▒│   │
  │   │   └───┐       ┌───┘   │       │   └───┐   │           │   ┌───┘   ┌───┘   │
12│   │▒▒▒ ▒▒▒│    ▒▒▒│    ▒▒▒│       │▒▒▒    │▒▒▒│▒▒▒ ▒▒▒ ▒▒▒│   │▒▒▒ ▒▒▒│       │
  │   │   ┌───┴───┐   │   ┌───┘   ┌───┘   ┌───┴───┼───────┬───┴───┴───────┤   ┌───┤
13│   │▒▒▒│       │▒▒▒│   │▒▒▒    │▒▒▒ ▒▒▒│▒▒▒    │▒▒▒    │▒▒▒ ▒▒▒ ▒▒▒    │   │▒▒▒│
  │   ├───┘       ├───┼───┘       ├───┬───┘       │       ├───────┐       │   │   │
14│   │▒▒▒ ▒▒▒    │▒▒▒│    ▒▒▒    │▒▒▒│    ▒▒▒    │▒▒▒ ▒▒▒│       │▒▒▒    │   │▒▒▒│
  ├───┘   ┌───────┘   │       ┌───┘   └───┐   ┌───┘       │       ├───────┘   │   │
15│▒▒▒ ▒▒▒│    ▒▒▒ ▒▒▒│    ▒▒▒│▒▒▒ ▒▒▒ ▒▒▒│▒▒▒│        ▒▒▒│       │▒▒▒ ▒▒▒    │▒▒▒│
  ├───────┴───┐   ┌───┤       └───────┬───┘   ├───────────┤       └───┐       │   │
16│    ▒▒▒ ▒▒▒│▒▒▒│   │    ▒▒▒        │    ▒▒▒│▒▒▒ ▒▒▒ ▒▒▒│▒▒▒        │▒▒▒ ▒▒▒│▒▒▒│
  ├───┐       ├───┘   └───────┐   ┌───┴───────┤   ┌───────┘   ┌───┐   ├───┐   └───┤
17│▒▒▒│    ▒▒▒│    ▒▒▒ ▒▒▒ ▒▒▒│   │▒▒▒ ▒▒▒    │▒▒▒│        ▒▒▒│   │   │▒▒▒│       │
  │   └───┐   │       ┌───┐   ├───┴───┐       ├───┤   ┌───┐   │   ├───┘   └───┐   │
18│▒▒▒ ▒▒▒│▒▒▒│    ▒▒▒│   │   │▒▒▒    │▒▒▒    │▒▒▒│   │   │▒▒▒│   │▒▒▒ ▒▒▒ ▒▒▒│   │
  │   ┌───┴───┴───────┘   ├───┘       │   ┌───┘   └───┘   │   │   └───────────┘   │
19│▒▒▒│    ▒▒▒ ▒▒▒ ▒▒▒ ▒▒▒│▒▒▒ ▒▒▒ ▒▒▒│▒▒▒│▒▒▒ ▒▒▒ ▒▒▒    │▒▒▒│                   │
  └───┴───────────────────┴───────────┴───┴───────────────┴───┴───────────────────┘
Solutions found: 1
status: OPTIMAL
Time taken: 0.09 seconds
```

**Solved puzzle**

<img src="https://raw.githubusercontent.com/Ar-Kareem/puzzle_solver/master/images/puzzles/lits_solved.png" alt="Lits solved" width="500">
